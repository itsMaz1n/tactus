{"version":3,"file":"haptic.cjs","sources":["../../constants.ts","../../utils.ts","../../haptic.ts"],"sourcesContent":["export const HAPTIC_ID = \"___haptic-switch___\";\nexport const HAPTIC_DURATION_MS = 10;\n","export function isIOS(): boolean {\n    if (typeof navigator === \"undefined\" || typeof window === \"undefined\") {\n        return false;\n    }\n\n    const iOSDevice = /iPad|iPhone|iPod/.test(navigator.userAgent);\n\n    const iPadOS =\n        navigator.platform === \"MacIntel\" && navigator.maxTouchPoints > 1;\n\n    return iOSDevice || iPadOS;\n}\n","import { HAPTIC_ID, HAPTIC_DURATION_MS } from \"./constants\";\nimport { isIOS as isIOSFunction } from \"./utils\";\n\nlet inputElement: HTMLInputElement | null = null;\nlet labelElement: HTMLLabelElement | null = null;\nlet isIOS = false;\n\n// must only be called once\nfunction mount() {\n    if (labelElement && inputElement) return;\n\n    isIOS = isIOSFunction();\n\n    inputElement = document.querySelector<HTMLInputElement>(`#${HAPTIC_ID}`);\n    labelElement = document.querySelector<HTMLLabelElement>(\n        `label[for=\"${HAPTIC_ID}\"]`\n    );\n\n    if (inputElement && labelElement) return;\n\n    inputElement = document.createElement(\"input\");\n    inputElement.type = \"checkbox\";\n    inputElement.id = HAPTIC_ID;\n    inputElement.setAttribute(\"switch\", \"\");\n    inputElement.style.display = \"none\";\n    document.body.appendChild(inputElement);\n\n    labelElement = document.createElement(\"label\");\n    labelElement.htmlFor = HAPTIC_ID;\n    labelElement.style.display = \"none\";\n    document.body.appendChild(labelElement);\n}\n\nif (typeof window !== \"undefined\") {\n    if (document.readyState === \"loading\") {\n        document.addEventListener(\"DOMContentLoaded\", mount, {\n            once: true,\n        });\n    } else {\n        mount();\n    }\n}\n\nexport function triggerHaptic(duration = HAPTIC_DURATION_MS) {\n    if (typeof window === \"undefined\") return;\n\n    if (isIOS) {\n        if (!inputElement || !labelElement) mount();\n        labelElement?.click();\n    } else {\n        if (navigator?.vibrate) navigator.vibrate(duration);\n        else labelElement?.click();\n    }\n}\n"],"names":["isIOS","isIOSFunction"],"mappings":";;AAAO,MAAM,SAAS,GAAG,qBAAqB;AACvC,MAAM,kBAAkB,GAAG,EAAE;;SCDpBA,OAAK,GAAA;IACjB,IAAI,OAAO,SAAS,KAAK,WAAW,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;AACnE,QAAA,OAAO,KAAK;IAChB;IAEA,MAAM,SAAS,GAAG,kBAAkB,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC;AAE9D,IAAA,MAAM,MAAM,GACR,SAAS,CAAC,QAAQ,KAAK,UAAU,IAAI,SAAS,CAAC,cAAc,GAAG,CAAC;IAErE,OAAO,SAAS,IAAI,MAAM;AAC9B;;ACRA,IAAI,YAAY,GAA4B,IAAI;AAChD,IAAI,YAAY,GAA4B,IAAI;AAChD,IAAI,KAAK,GAAG,KAAK;AAEjB;AACA,SAAS,KAAK,GAAA;IACV,IAAI,YAAY,IAAI,YAAY;QAAE;IAElC,KAAK,GAAGC,OAAa,EAAE;IAEvB,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAmB,CAAA,CAAA,EAAI,SAAS,CAAA,CAAE,CAAC;IACxE,YAAY,GAAG,QAAQ,CAAC,aAAa,CACjC,CAAA,WAAA,EAAc,SAAS,CAAA,EAAA,CAAI,CAC9B;IAED,IAAI,YAAY,IAAI,YAAY;QAAE;AAElC,IAAA,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC;AAC9C,IAAA,YAAY,CAAC,IAAI,GAAG,UAAU;AAC9B,IAAA,YAAY,CAAC,EAAE,GAAG,SAAS;AAC3B,IAAA,YAAY,CAAC,YAAY,CAAC,QAAQ,EAAE,EAAE,CAAC;AACvC,IAAA,YAAY,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM;AACnC,IAAA,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC;AAEvC,IAAA,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC;AAC9C,IAAA,YAAY,CAAC,OAAO,GAAG,SAAS;AAChC,IAAA,YAAY,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM;AACnC,IAAA,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC;AAC3C;AAEA,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;AAC/B,IAAA,IAAI,QAAQ,CAAC,UAAU,KAAK,SAAS,EAAE;AACnC,QAAA,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,KAAK,EAAE;AACjD,YAAA,IAAI,EAAE,IAAI;AACb,SAAA,CAAC;IACN;SAAO;AACH,QAAA,KAAK,EAAE;IACX;AACJ;AAEM,SAAU,aAAa,CAAC,QAAQ,GAAG,kBAAkB,EAAA;IACvD,IAAI,OAAO,MAAM,KAAK,WAAW;QAAE;IAEnC,IAAI,KAAK,EAAE;AACP,QAAA,IAAI,CAAC,YAAY,IAAI,CAAC,YAAY;AAAE,YAAA,KAAK,EAAE;AAC3C,QAAA,YAAY,aAAZ,YAAY,KAAA,MAAA,GAAA,MAAA,GAAZ,YAAY,CAAE,KAAK,EAAE;IACzB;SAAO;AACH,QAAA,IAAI,SAAS,KAAA,IAAA,IAAT,SAAS,KAAA,MAAA,GAAA,MAAA,GAAT,SAAS,CAAE,OAAO;AAAE,YAAA,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC;;AAC9C,YAAA,YAAY,aAAZ,YAAY,KAAA,MAAA,GAAA,MAAA,GAAZ,YAAY,CAAE,KAAK,EAAE;IAC9B;AACJ;;;;"}